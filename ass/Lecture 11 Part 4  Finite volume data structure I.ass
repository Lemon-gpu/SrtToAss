[Script Info]
; Script generated by Aegisub 3.2.2
; http://www.aegisub.org/
Title: Default Aegisub file
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
YCbCr Matrix: None
PlayResX: 1080
PlayResY: 720

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,20,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,2,10,10,10,1
Style: 辉英,Tahoma,35,&H00FFFFFF,&H000000FF,&H003B3C3D,&H00000000,0,0,0,0,70,70,1,0,1,1.3,0.2,2,0,0,10,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,00:00:00.000,00:00:08.760,辉英,,0,0,0,,No matter what kind of meshes you have, you can construct a finite volume solver
Dialogue: 0,00:00:08.760,00:00:15.840,辉英,,0,0,0,,that works for all of these meshes through a common data structure. So you
Dialogue: 0,00:00:15.840,00:00:21.540,辉英,,0,0,0,,don't need to adapt your finite volume solver to every different type of mesh.
Dialogue: 0,00:00:21.540,00:00:29.000,辉英,,0,0,0,,So you can have a solver that, given a mesh, you ask for what are my, for example,
Dialogue: 0,00:00:29.000,00:00:39.560,辉英,,0,0,0,,interface normals, okay, and what are my neighbors of each cell, and you can
Dialogue: 0,00:00:39.560,00:00:46.420,辉英,,0,0,0,,apply the same solver to all kinds of different meshes. How do we achieve this?
Dialogue: 0,00:00:46.420,00:00:53.860,辉英,,0,0,0,,We need several data structures in order to make the finite volume mesh work, and
Dialogue: 0,00:00:53.860,00:00:58.760,辉英,,0,0,0,,the most important data structures is the interface.
Dialogue: 0,00:00:58.760,00:00:59.000,辉英,,0,0,0,,Okay?
Dialogue: 0,00:00:59.000,00:01:09.000,辉英,,0,0,0,,So for every interface, every interface must know,
Dialogue: 0,00:01:09.000,00:01:20.260,辉英,,0,0,0,,oops, must know its neighbors, its neighboring cells.
Dialogue: 0,00:01:20.260,00:01:28.760,辉英,,0,0,0,,Right, so this is the most important criterion,
Dialogue: 0,00:01:28.760,00:01:38.760,辉英,,0,0,0,,and so essentially if, let's say, if I have every interface marked as i and j,
Dialogue: 0,00:01:38.760,00:01:45.760,辉英,,0,0,0,,okay, so i and j are the index of the cells which lies on both sides.
Dialogue: 0,00:01:45.760,00:01:54.760,辉英,,0,0,0,,So in applying finite volume, we first go through, we first go through the
Dialogue: 0,00:01:54.760,00:01:56.760,辉英,,0,0,0,,finite volume.
Dialogue: 0,00:01:56.760,00:01:58.760,辉英,,0,0,0,,Okay?
Dialogue: 0,00:01:58.760,00:02:08.760,辉英,,0,0,0,,So every pair of i and j's compute the f i j equal to f numerical u i and u j.
Dialogue: 0,00:02:08.760,00:02:22.760,辉英,,0,0,0,,Because in the computer, you know for every interface what is the corresponding i and
Dialogue: 0,00:02:22.760,00:02:23.760,辉英,,0,0,0,,j.
Dialogue: 0,00:02:23.760,00:02:24.760,辉英,,0,0,0,,So using the i and j, you can find the cell averages at the cell i and cell j.
Dialogue: 0,00:02:24.760,00:02:25.760,辉英,,0,0,0,,Okay?
Dialogue: 0,00:02:25.760,00:02:26.760,辉英,,0,0,0,,So you can see that the i and j are the index of the cells which lie on both sides.
Dialogue: 0,00:02:26.760,00:02:27.760,辉英,,0,0,0,,Okay?
Dialogue: 0,00:02:27.760,00:02:28.760,辉英,,0,0,0,,So this is the i and j.
Dialogue: 0,00:02:28.760,00:02:32.760,辉英,,0,0,0,,With these cell averages, we can compute the numerical flux.
Dialogue: 0,00:02:32.760,00:02:33.760,辉英,,0,0,0,,Right?
Dialogue: 0,00:02:33.760,00:02:34.760,辉英,,0,0,0,,Okay.
Dialogue: 0,00:02:34.760,00:02:45.760,辉英,,0,0,0,,And also for every interface, you must, must store, and that's something that's good to
Dialogue: 0,00:02:45.760,00:02:52.760,辉英,,0,0,0,,calculate in advance, the normal of that interface times the size of that interface.
Dialogue: 0,00:02:52.760,00:02:53.760,辉英,,0,0,0,,So we can compute the normal of that interface.
Dialogue: 0,00:02:53.760,00:02:54.760,辉英,,0,0,0,,Okay?
Dialogue: 0,00:02:54.760,00:03:01.760,辉英,,0,0,0,,So we can compute that in advance before we even start solving the differential equations.
Dialogue: 0,00:03:01.760,00:03:11.760,辉英,,0,0,0,,So the second step after computing the flux, so this is a vector, we compute the flux dot
Dialogue: 0,00:03:11.760,00:03:17.760,辉英,,0,0,0,,with the surface normal times the cell size.
Dialogue: 0,00:03:17.760,00:03:19.760,辉英,,0,0,0,,Alright?
Dialogue: 0,00:03:19.760,00:03:21.760,辉英,,0,0,0,,Okay.
Dialogue: 0,00:03:21.760,00:03:22.760,辉英,,0,0,0,,And then after this.
Dialogue: 0,00:03:22.760,00:03:23.760,辉英,,0,0,0,,Okay?
Dialogue: 0,00:03:23.760,00:03:35.280,辉英,,0,0,0,,And then after this, we can clear, we can set all dui dt to zero.
Dialogue: 0,00:03:35.280,00:03:39.160,辉英,,0,0,0,,So clear the time derivatives.
Dialogue: 0,00:03:39.160,00:03:45.760,辉英,,0,0,0,,And that can actually be applied when you start computing that time step.
Dialogue: 0,00:03:45.760,00:03:46.760,辉英,,0,0,0,,Right?
Dialogue: 0,00:03:46.760,00:03:49.120,辉英,,0,0,0,,So set dui dt to zero.
Dialogue: 0,00:03:49.120,00:03:53.760,辉英,,0,0,0,,And then, then after you compute this.
Dialogue: 0,00:03:53.760,00:04:02.760,辉英,,0,0,0,,Which you know, if I sum over this for all the neighbors of i, I get the time derivative.
Dialogue: 0,00:04:02.760,00:04:21.280,辉英,,0,0,0,,So with this, I simply dui dt is equal to dui dt plus, right, plus is the, so for i,
Dialogue: 0,00:04:21.280,00:04:23.280,辉英,,0,0,0,,I think it's going to be minus.
Dialogue: 0,00:04:23.280,00:04:34.800,辉英,,0,0,0,,Minus one over vi times fij and ij, sij.
Dialogue: 0,00:04:34.800,00:04:40.680,辉英,,0,0,0,,So this is, this is i.
Dialogue: 0,00:04:40.680,00:04:51.520,辉英,,0,0,0,,And for the jth cell, it'll be minus, it'll be, it'll be add, it'll be addition.
Dialogue: 0,00:04:51.520,00:04:52.780,辉英,,0,0,0,,So this is one over vj.
Dialogue: 0,00:04:52.780,00:04:57.300,辉英,,0,0,0,,The same, the same flux.
Dialogue: 0,00:04:57.300,00:05:06.300,辉英,,0,0,0,,Is the left hand side and right hand side dui dt, they are corresponding to different
Dialogue: 0,00:05:06.300,00:05:07.300,辉英,,0,0,0,,time steps?
Dialogue: 0,00:05:07.300,00:05:11.180,辉英,,0,0,0,,No, they are, they are corresponding to the same time step.
Dialogue: 0,00:05:11.180,00:05:14.540,辉英,,0,0,0,,I'm just, so imagine this as a variable.
Dialogue: 0,00:05:14.540,00:05:18.040,辉英,,0,0,0,,This and this as a variable you have in your computer.
Dialogue: 0,00:05:18.040,00:05:21.700,辉英,,0,0,0,,In the beginning, I set all these variables to zero.
Dialogue: 0,00:05:21.700,00:05:22.700,辉英,,0,0,0,,And as I go through.
Dialogue: 0,00:05:22.700,00:05:32.140,辉英,,0,0,0,,Every pairs of neighboring grid points or every interface equivalently, I am, I'm changing
Dialogue: 0,00:05:32.140,00:05:40.560,辉英,,0,0,0,,the values of dui dt and duj dt for these values.
Dialogue: 0,00:05:40.560,00:05:50.820,辉英,,0,0,0,,You can imagine after I go through every interface, the value of dui dt is going to be the total
Dialogue: 0,00:05:50.820,00:05:51.820,辉英,,0,0,0,,sum of.
Dialogue: 0,00:05:51.820,00:05:52.320,辉英,,0,0,0,,Oh.
Dialogue: 0,00:05:52.700,00:05:54.320,辉英,,0,0,0,,These quantities.
Dialogue: 0,00:05:54.320,00:05:55.320,辉英,,0,0,0,,Right?
Dialogue: 0,00:05:55.320,00:05:58.580,辉英,,0,0,0,,As I go over all the neighbors of i.
Dialogue: 0,00:05:58.580,00:06:03.580,辉英,,0,0,0,,And the value of duj dt is also going to be the correct value after I go through all
Dialogue: 0,00:06:03.580,00:06:07.920,辉英,,0,0,0,,the, all the interfaces.
Dialogue: 0,00:06:07.920,00:06:16.200,辉英,,0,0,0,,And the advantage of this method is it doesn't matter how many neighbors does each cell have.
Dialogue: 0,00:06:16.200,00:06:21.700,辉英,,0,0,0,,I don't have to do anything differently for neighbors of different sizes.
Dialogue: 0,00:06:21.700,00:06:22.700,辉英,,0,0,0,,Of different sizes.
Dialogue: 0,00:06:22.700,00:06:25.320,辉英,,0,0,0,,So for cells of different number of neighbors.
Dialogue: 0,00:06:25.320,00:06:33.320,辉英,,0,0,0,,So in this case you did that for the t instead of having nji instead of nij.
Dialogue: 0,00:06:33.320,00:06:43.320,辉英,,0,0,0,,Since you're taking 7j, the output face is going to be nji.
Dialogue: 0,00:06:43.320,00:06:44.320,辉英,,0,0,0,,Right.
Dialogue: 0,00:06:44.320,00:06:49.700,辉英,,0,0,0,,The difference between these two are, I'm still using nij here.
Dialogue: 0,00:06:49.700,00:06:50.820,辉英,,0,0,0,,Because nij is the normal.
Dialogue: 0,00:06:50.820,00:06:51.820,辉英,,0,0,0,,That's the normal.
Dialogue: 0,00:06:51.820,00:06:51.860,辉英,,0,0,0,,So.
Dialogue: 0,00:06:51.860,00:06:52.060,辉英,,0,0,0,,So.
Dialogue: 0,00:06:52.060,00:06:52.120,辉英,,0,0,0,,So.
Dialogue: 0,00:06:52.120,00:06:53.120,辉英,,0,0,0,,So.
Dialogue: 0,00:06:53.120,00:06:54.120,辉英,,0,0,0,,So.
Dialogue: 0,00:06:54.120,00:06:55.120,辉英,,0,0,0,,So.
Dialogue: 0,00:06:55.120,00:06:56.120,辉英,,0,0,0,,So that's normal.
Dialogue: 0,00:06:56.120,00:06:57.120,辉英,,0,0,0,,That points from the cell i to cell j.
Dialogue: 0,00:06:57.120,00:06:58.120,辉英,,0,0,0,,Nij here.
Dialogue: 0,00:06:58.120,00:07:03.740,辉英,,0,0,0,,Nij is going to be exactly equal to the minus of nji.
Dialogue: 0,00:07:03.740,00:07:08.460,辉英,,0,0,0,,And sij being a scalar is equal to the same as sji.
Dialogue: 0,00:07:08.460,00:07:09.460,辉英,,0,0,0,,Right.
Dialogue: 0,00:07:09.460,00:07:10.460,辉英,,0,0,0,,So.
Dialogue: 0,00:07:10.460,00:07:11.460,辉英,,0,0,0,,So the size is the same.
Dialogue: 0,00:07:11.460,00:07:12.460,辉英,,0,0,0,,Ah.
Dialogue: 0,00:07:12.460,00:07:19.360,辉英,,0,0,0,,So this is actually what guarantees the discreet conservation in finite volume schemes.
Dialogue: 0,00:07:19.360,00:07:20.360,辉英,,0,0,0,,If you.
Dialogue: 0,00:07:20.360,00:07:21.360,辉英,,0,0,0,,If you think of.
Dialogue: 0,00:07:21.360,00:07:28.320,辉英,,0,0,0,,of quantity, if you track a quantity that is total is equal to the summation of VI
Dialogue: 0,00:07:28.320,00:07:39.580,辉英,,0,0,0,,over all the I's, DUI DT, after you iterate over every interface, you added a
Dialogue: 0,00:07:39.580,00:07:47.760,辉英,,0,0,0,,certain quantity to DUI DT and you subtracted the same quantity but like
Dialogue: 0,00:07:47.760,00:07:52.760,辉英,,0,0,0,,with a different ratio with a different VI versus VJ.
Dialogue: 0,00:07:52.760,00:07:57.660,辉英,,0,0,0,,This total is always going to be staying the same this total will
Dialogue: 0,00:07:57.660,00:08:04.600,辉英,,0,0,0,,always be the same throughout your iteration over all the interfaces.
Dialogue: 0,00:08:04.600,00:08:09.580,辉英,,0,0,0,,So this total is initially 0 because you set DUI DT equal to 0 for all
Dialogue: 0,00:08:09.580,00:08:17.260,辉英,,0,0,0,,the I's and after you go through every interface, this total is going to stay
Dialogue: 0,00:08:17.260,00:08:17.760,辉英,,0,0,0,,the same unlike Stew.
Dialogue: 0,00:08:17.760,00:08:22.900,辉英,,0,0,0,,because if you multiply this with v i and this with v j,
Dialogue: 0,00:08:23.400,00:08:26.040,辉英,,0,0,0,,the add and subtraction exactly cancels each other.
Dialogue: 0,00:08:27.220,00:08:31.860,辉英,,0,0,0,,That's what guarantees the discrete conservation properties in finite volume.
Dialogue: 0,00:08:34.020,00:08:42.280,辉英,,0,0,0,,And to honor it, you must use the same flux for i and for j,
Dialogue: 0,00:08:42.440,00:08:45.540,辉英,,0,0,0,,the same flux between i and j for the cell i and cell j.
Dialogue: 0,00:08:45.540,00:08:54.240,辉英,,0,0,0,,And you should, I don't see any reason not, to have these properties satisfied.
Dialogue: 0,00:08:55.120,00:09:01.860,辉英,,0,0,0,,The interface must be, we call, consistent when seen from the cell i and seen from cell j.
Dialogue: 0,00:09:01.860,00:09:03.540,辉英,,0,0,0,,All right.
Dialogue: 0,00:09:04.640,00:09:08.540,辉英,,0,0,0,,So this du by dt equal to zero is the initialization state,
Dialogue: 0,00:09:08.660,00:09:10.700,辉英,,0,0,0,,the next two equations are the update state.
Dialogue: 0,00:09:11.100,00:09:12.160,辉英,,0,0,0,,Yes, yes.
Dialogue: 0,00:09:12.720,00:09:14.720,辉英,,0,0,0,,So update is the difference with respect to what?
Dialogue: 0,00:09:15.540,00:09:16.580,辉英,,0,0,0,,Each iteration.
Dialogue: 0,00:09:17.380,00:09:19.400,辉英,,0,0,0,,Or the design of this iteration.
Dialogue: 0,00:09:20.020,00:09:26.100,辉英,,0,0,0,,The update is applied when we go through all the interfaces.
Dialogue: 0,00:09:27.540,00:09:30.940,辉英,,0,0,0,,So after you go through all the interfaces,
Dialogue: 0,00:09:31.200,00:09:37.740,辉英,,0,0,0,,you completed calculating the du dt for on time step.
Dialogue: 0,00:09:39.740,00:09:45.160,辉英,,0,0,0,,So the loop through the interfaces is the same as our loop
Dialogue: 0,00:09:45.160,00:09:45.520,辉英,,0,0,0,,through the interfaces.
Dialogue: 0,00:09:45.540,00:09:49.080,辉英,,0,0,0,,So we can see that the loop is the same as our loop through the grid points in the one-dimensional case.
Dialogue: 0,00:09:49.080,00:09:52.600,辉英,,0,0,0,,It's just in the one-dimensional case, as we loop over the i,
Dialogue: 0,00:09:52.600,00:09:56.100,辉英,,0,0,0,,you can either see it as if we are looping through the cells,
Dialogue: 0,00:09:56.100,00:10:00.600,辉英,,0,0,0,,or you can see it as if we are looping through the interfaces.
Dialogue: 0,00:10:04.020,00:10:09.660,辉英,,0,0,0,,Right, remember in the 1D case, in our code over here,
Dialogue: 0,00:10:09.660,00:10:14.760,辉英,,0,0,0,,right, so we,
Dialogue: 0,00:10:15.540,00:10:20.540,辉英,,0,0,0,,all the way up to here, up to line 20,
Dialogue: 0,00:10:20.540,00:10:24.540,辉英,,0,0,0,,is actually constructing the fluxes.
Dialogue: 0,00:10:24.540,00:10:32.540,辉英,,0,0,0,,Right, in the, so I mean, we didn't do any loop over here,
Dialogue: 0,00:10:32.540,00:10:36.300,辉英,,0,0,0,,but you can see this as we are looping through the interfaces
Dialogue: 0,00:10:36.300,00:10:39.300,辉英,,0,0,0,,to construct the flux at each interface.
Dialogue: 0,00:10:39.300,00:10:42.300,辉英,,0,0,0,,And here, when we perform the loop,
Dialogue: 0,00:10:42.300,00:10:44.300,辉英,,0,0,0,,we are actually constructing the flux.
Dialogue: 0,00:10:44.300,00:10:44.980,辉英,,0,0,0,,Right.
Dialogue: 0,00:10:44.980,00:10:50.560,辉英,,0,0,0,,When we perform a loop, we are looping over all the interfaces
Dialogue: 0,00:10:50.560,00:10:54.740,辉英,,0,0,0,,to construct the flux and add and subtract the numbers
Dialogue: 0,00:10:54.740,00:10:57.300,辉英,,0,0,0,,to the adjacent cells.
